<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
  <title>Voi - Main</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
</head>

<body>
  <nav class="green lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="/" class="brand-logo voi">Voi</a>
      <ul class="right hide-on-med-and-down">
      </ul>

      <ul id="nav-desktop" class="right nav-desktop">
      </ul>
      <ul id="nav-mobile" class="sidenav">
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="row">
    <div class="col s12 m9 l6" id="main_feed">
    </div>
  </div>

  <footer id="footer" class="page-footer green">
  </footer>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script src="js/scripts.js"></script>
  <script>
    let id = getCookie('user_id');
    console.log(id);
    if (id == null) {
      console.log("Has no id cookie");
      window.location.href = websiteUrl + "/login.html";
    } else {
      fetch(api + 'user/' + id)
        .then(response => response.json())
        .then(result => {
          let login = result['login'];
          let navDesktop = document.getElementById('nav-desktop');
          let navMobile = document.getElementById('nav-mobile');

          if (id == null) {
            window.location.href = websiteUrl + "/login.html";
          } else {
            navDesktop.innerHTML += `
            <li>${login}</li>
            <li><a href="${websiteUrl}/new-post.html">New Idea</a></li>
            <li><a href="#" onclick="logoutUser()">Log Out</a></li>
            `
            navMobile.innerHTML += `
            <li>${login}</li>
            <li><a href="${websiteUrl}/new-post.html">New Idea</a></li>
            <li><a href="#" onclick="logoutUser()">Log Out</a></li>
            `
          }
        })
    }
    fillContent();

    window.onload = getFeed;
  </script>

</body>

</html>